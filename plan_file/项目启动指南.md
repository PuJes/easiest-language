# 🚀 语言学习平台项目启动指南

## 📋 启动指南概述

**目标**：帮助您快速启动项目开发，建立高效的开发工作流
**适用对象**：项目经理、开发团队、个人开发者
**预计时间**：30分钟完成环境配置，1小时完成首次构建

---

## 🎯 快速启动检查

### 第一步：环境验证（5分钟）

#### 检查Node.js版本

```bash
# 检查Node.js版本（需要18.x或更高）
node --version

# 检查npm版本
npm --version

# 检查Git版本
git --version
```

#### 验证项目状态

```bash
# 进入项目目录
cd easiest-language

# 检查项目文件
ls -la

# 检查package.json
cat package.json
```

### 第二步：依赖安装（10分钟）

#### 安装项目依赖

```bash
# 安装所有依赖
npm install

# 验证安装成功
npm list --depth=0
```

#### 验证开发环境

```bash
# 启动开发服务器
npm run dev

# 在浏览器中访问 http://localhost:3000
# 确认页面正常加载
```

### 第三步：测试环境验证（10分钟）

#### 运行测试

```bash
# 运行单元测试
npm test

# 运行测试覆盖率
npm run test:coverage

# 运行E2E测试（需要先启动开发服务器）
npm run test:e2e
```

---

## 🏗️ 开发环境配置

### IDE配置（VS Code推荐）

#### 必需插件

```json
// .vscode/extensions.json
{
  "recommendations": [
    "ms-vscode.vscode-typescript-next",
    "bradlc.vscode-tailwindcss",
    "esbenp.prettier-vscode",
    "ms-vscode.vscode-eslint",
    "ms-vscode.vscode-jest",
    "ms-vscode.vscode-cypress"
  ]
}
```

#### 工作区设置

```json
// .vscode/settings.json
{
  "typescript.preferences.importModuleSpecifier": "relative",
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
  "jest.autoRun": {
    "watch": false,
    "onSave": "test-file"
  },
  "tailwindCSS.includeLanguages": {
    "typescript": "javascript",
    "typescriptreact": "javascript"
  }
}
```

### Git配置

#### 初始化Git仓库

```bash
# 如果还没有Git仓库
git init

# 添加远程仓库（如果有）
git remote add origin <your-repo-url>

# 创建初始提交
git add .
git commit -m "feat: 初始化项目架构和配置"
```

#### Git Hooks配置

```bash
# 安装husky（如果还没有）
npm install --save-dev husky

# 配置pre-commit钩子
npx husky add .husky/pre-commit "npm run lint && npm test"
```

---

## 📁 项目结构初始化

### 创建必要目录

#### 基础目录结构

```bash
# 创建组件目录
mkdir -p src/components/{UI,Features,Layout,Pages}

# 创建工具函数目录
mkdir -p src/lib/{utils,validation,hooks}

# 创建测试目录
mkdir -p src/components/__tests__
mkdir -p src/lib/__tests__

# 创建样式目录
mkdir -p src/styles
```

#### 创建基础文件

```bash
# 创建组件索引文件
touch src/components/index.ts

# 创建工具函数索引文件
touch src/lib/index.ts

# 创建样式入口文件
touch src/styles/globals.css
```

### 配置TypeScript路径别名

#### 更新tsconfig.json

```json
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"],
      "@/components/*": ["./src/components/*"],
      "@/lib/*": ["./src/lib/*"],
      "@/styles/*": ["./src/styles/*"]
    }
  }
}
```

---

## 🧪 测试环境配置

### Jest配置优化

#### 更新jest.config.js

```javascript
const nextJest = require('next/jest')

const createJestConfig = nextJest({
  dir: './',
})

const customJestConfig = {
  setupFilesAfterEnv: ['<rootDir>/jest.setup.js'],
  testEnvironment: 'jsdom',
  moduleNameMapping: {
    '^@/(.*)$': '<rootDir>/src/$1',
  },
  collectCoverageFrom: [
    'src/**/*.{js,jsx,ts,tsx}',
    '!src/**/*.d.ts',
    '!src/**/*.stories.{js,jsx,ts,tsx}',
  ],
}

module.exports = createJestConfig(customJestConfig)
```

#### 创建测试工具函数

```typescript
// src/lib/__tests__/test-utils.tsx
import { render, RenderOptions } from '@testing-library/react'
import { ReactElement } from 'react'

const customRender = (
  ui: ReactElement,
  options?: Omit<RenderOptions, 'wrapper'>
) => render(ui, { ...options })

export * from '@testing-library/react'
export { customRender as render }
```

### Cypress配置

#### 更新cypress.config.ts

```typescript
import { defineConfig } from 'cypress'

export default defineConfig({
  e2e: {
    baseUrl: 'http://localhost:3000',
    supportFile: 'cypress/support/e2e.ts',
    specPattern: 'cypress/e2e/**/*.cy.{js,jsx,ts,tsx}',
    video: false,
    screenshotOnRunFailure: false,
  },
  component: {
    devServer: {
      framework: 'next',
      bundler: 'webpack',
    },
  },
})
```

---

## 🎨 样式系统配置

### Tailwind CSS配置

#### 更新tailwind.config.ts

```typescript
import type { Config } from 'tailwindcss'

const config: Config = {
  content: [
    './src/pages/**/*.{js,ts,jsx,tsx,mdx}',
    './src/components/**/*.{js,ts,jsx,tsx,mdx}',
    './src/app/**/*.{js,ts,jsx,tsx,mdx}',
  ],
  theme: {
    extend: {
      colors: {
        primary: {
          50: '#f0f9ff',
          500: '#28a745',
          900: '#14532d',
        },
        secondary: {
          50: '#f8f9fa',
          500: '#6c757d',
          900: '#343a40',
        },
      },
      fontFamily: {
        sans: ['Inter', 'system-ui', 'sans-serif'],
      },
    },
  },
  plugins: [],
}

export default config
```

#### 创建基础样式文件

```css
/* src/styles/globals.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    font-family: 'Inter', system-ui, sans-serif;
  }
  
  body {
    @apply bg-gray-50 text-gray-900;
  }
}

@layer components {
  .btn-primary {
    @apply bg-primary-500 text-white px-4 py-2 rounded-lg hover:bg-primary-600 transition-colors;
  }
  
  .card {
    @apply bg-white rounded-lg shadow-md p-6;
  }
}
```

---

## 📊 数据层配置

### 创建MVP数据结构

#### 更新类型定义

```typescript
// src/lib/types/language-mvp.ts
export interface LanguageMVP {
  id: string
  name: string
  nativeName: string
  family: string
  region: string
  fsi: {
    category: 1 | 2 | 3 | 4 | 5
    hours: number
    weeks: number
  }
  difficulty: {
    overall: number
    reasoning: string
  }
  speakers: number
  countries: string[]
  highlights: string[]
}

export type LanguageSortBy = 
  | 'name' 
  | 'difficulty-asc' 
  | 'difficulty-desc'
  | 'hours-asc'
  | 'hours-desc'

export interface LanguageFilters {
  family?: string
  region?: string
  fsiCategory?: 1 | 2 | 3 | 4 | 5
}
```

#### 创建数据验证器

```typescript
// src/lib/validation/language-validator.ts
import type { LanguageMVP } from '../types/language-mvp'

export class LanguageValidator {
  static validateLanguage(lang: any): lang is LanguageMVP {
    if (!lang || typeof lang !== 'object') return false
  
    // 检查必需字段
    if (typeof lang.id !== 'string') return false
    if (typeof lang.name !== 'string') return false
    if (typeof lang.nativeName !== 'string') return false
  
    // 检查FSI数据
    if (!this.validateFSI(lang.fsi)) return false
  
    // 检查难度数据
    if (!this.validateDifficulty(lang.difficulty)) return false
  
    return true
  }
  
  private static validateFSI(fsi: any): boolean {
    return fsi && 
           typeof fsi.category === 'number' && 
           fsi.category >= 1 && 
           fsi.category <= 5 &&
           typeof fsi.hours === 'number' &&
           fsi.hours > 0
  }
  
  private static validateDifficulty(diff: any): boolean {
    return diff && 
           typeof diff.overall === 'number' &&
           diff.overall >= 1 &&
           diff.overall <= 10 &&
           typeof diff.reasoning === 'string'
  }
}
```

---

## 🧩 组件开发准备

### 创建基础组件模板

#### 组件文件结构

```bash
# 创建LanguageTable组件
mkdir -p src/components/Features/LanguageTable
touch src/components/Features/LanguageTable/LanguageTable.tsx
touch src/components/Features/LanguageTable/LanguageTable.test.tsx
touch src/components/Features/LanguageTable/index.ts
```

#### 组件模板代码

```typescript
// src/components/Features/LanguageTable/LanguageTable.tsx
import React from 'react'
import type { LanguageMVP, LanguageSortBy, LanguageFilters } from '@/lib/types/language-mvp'

interface LanguageTableProps {
  languages: LanguageMVP[]
  sortBy: LanguageSortBy
  filters: LanguageFilters
  onSortChange: (sortBy: LanguageSortBy) => void
  onFilterChange: (filters: LanguageFilters) => void
}

export const LanguageTable: React.FC<LanguageTableProps> = ({
  languages,
  sortBy,
  filters,
  onSortChange,
  onFilterChange
}) => {
  return (
    <div className="language-table">
      {/* 组件实现 */}
    </div>
  )
}
```

#### 测试模板代码

```typescript
// src/components/Features/LanguageTable/LanguageTable.test.tsx
import { render, screen } from '@/lib/__tests__/test-utils'
import { LanguageTable } from './LanguageTable'

describe('LanguageTable', () => {
  const mockLanguages = [
    {
      id: 'es',
      name: 'Spanish',
      nativeName: 'Español',
      family: 'Indo-European',
      region: 'Europe',
      fsi: { category: 1, hours: 600, weeks: 24 },
      difficulty: { overall: 3, reasoning: '语法相对简单' },
      speakers: 500000000,
      countries: ['Spain', 'Mexico'],
      highlights: ['发音规则', '语法简单']
    }
  ]

  it('should render language table correctly', () => {
    render(
      <LanguageTable
        languages={mockLanguages}
        sortBy="name"
        filters={{}}
        onSortChange={jest.fn()}
        onFilterChange={jest.fn()}
      />
    )
  
    expect(screen.getByText('Spanish')).toBeInTheDocument()
  })
})
```

---

## 🚀 开发工作流建立

### 日常开发流程

#### 开发前准备

```bash
# 1. 拉取最新代码
git pull origin main

# 2. 创建功能分支
git checkout -b feature/language-table

# 3. 启动开发服务器
npm run dev
```

#### 开发中流程

```bash
# 1. 编写测试（TDD）
npm test -- --watch

# 2. 编写组件代码
# 3. 运行测试确保通过
npm test

# 4. 代码格式化
npm run lint
```

#### 开发完成

```bash
# 1. 运行完整测试
npm run test:coverage

# 2. 提交代码
git add .
git commit -m "feat: 实现LanguageTable组件"

# 3. 推送分支
git push origin feature/language-table
```

### 代码质量检查

#### 自动化检查

```bash
# 运行所有检查
npm run lint        # ESLint检查
npm test           # 单元测试
npm run test:e2e   # E2E测试
npm run build      # 构建检查
```

#### 手动检查清单

- [ ] 代码符合TypeScript类型要求
- [ ] 组件有完整的测试覆盖
- [ ] 样式使用Tailwind CSS类
- [ ] 代码注释清晰完整
- [ ] 组件接口设计合理

---

## 📈 性能监控配置

### 性能指标监控

#### 配置Web Vitals

```typescript
// src/lib/utils/web-vitals.ts
import { NextWebVitalsMetric } from 'next/app'

export function reportWebVitals(metric: NextWebVitalsMetric) {
  // 开发环境：控制台输出
  if (process.env.NODE_ENV === 'development') {
    console.log(metric)
  }
  
  // 生产环境：发送到分析服务
  if (process.env.NODE_ENV === 'production') {
    // 这里可以集成Google Analytics或其他分析服务
    console.log('Web Vital:', metric)
  }
}
```

#### 性能测试脚本

```bash
# 安装Lighthouse CLI
npm install -g lighthouse

# 运行性能测试
lighthouse http://localhost:3000 --output html --output-path ./lighthouse-report.html
```

---

## 🔧 故障排除指南

### 常见问题解决

#### 依赖安装问题

```bash
# 清除缓存重新安装
rm -rf node_modules package-lock.json
npm cache clean --force
npm install
```

#### 测试运行问题

```bash
# 清除Jest缓存
npm test -- --clearCache

# 重新安装Cypress
npx cypress install
```

#### 构建问题

```bash
# 清除Next.js缓存
rm -rf .next
npm run build
```

#### 开发服务器问题

```bash
# 检查端口占用
lsof -i :3000

# 使用不同端口
npm run dev -- -p 3001
```

---

## 📚 学习资源推荐

### 官方文档

- [Next.js 14 官方文档](https://nextjs.org/docs)
- [React 19 官方文档](https://react.dev/)
- [TypeScript 官方手册](https://www.typescriptlang.org/docs/)
- [Tailwind CSS 官方文档](https://tailwindcss.com/docs)

### 最佳实践

- [Next.js App Router 最佳实践](https://nextjs.org/docs/app)
- [React 性能优化指南](https://react.dev/learn/render-and-commit)
- [TypeScript 最佳实践](https://www.typescriptlang.org/docs/handbook/declaration-files/do-s-and-don-ts.html)

### 社区资源

- [Next.js GitHub](https://github.com/vercel/next.js)
- [React GitHub](https://github.com/facebook/react)
- [TypeScript GitHub](https://github.com/microsoft/TypeScript)
