# 🧪 语言学习平台 MVP-TDD 开发方案

## 📋 项目概述重新定义

### MVP核心目标
- **简化验证**：验证用户是否需要科学的语言难度数据
- **快速上线**：2周内完成可用产品验证核心假设
- **极简功能**：3个页面 + 50种语言数据
- **测试驱动**：确保代码质量的同时快速迭代

### MVP技术栈（已就绪）
- ✅ **前端**：Next.js 14 + React 19 + TypeScript 5
- ✅ **样式**：Tailwind CSS 4
- ✅ **测试**：Jest 30 + React Testing Library 16 + Cypress 15
- ✅ **部署**：Vercel + 静态生成

---

## 🏗️ MVP-TDD开发阶段（重新规划）

### 第一阶段：MVP数据层与类型系统 ✅ **已完成**

#### 完成状态评估
- [x] **测试框架搭建完成**：Jest + Cypress + 90%覆盖率配置
- [x] **基础数据层测试**：28种语言数据验证 
- [x] **类型系统测试**：Language接口和数据结构验证
- **需要调整**：将数据结构简化为MVP需求

#### MVP数据结构调整任务
```typescript
// 需要重新定义为MVP简化版本
interface LanguageMVP {
  id: string;
  name: string;
  nativeName: string;
  family: string;
  region: string;
  fsi: {
    category: 1 | 2 | 3 | 4 | 5;
    hours: number;
    weeks: number;
  };
  difficulty: {
    overall: number;
    reasoning: string;
  };
  speakers: number;
  countries: string[];
  highlights: string[];
}
```

**🔲 调整任务（1天）**
- [ ] 重写language.ts类型定义为MVP版本
- [ ] 更新数据验证测试用例 
- [ ] 准备50种精选语言的标准化数据
- [ ] 测试数据结构的完整性和一致性

---

### 第二阶段：MVP核心组件开发 🚧 **重新规划**

#### TDD实践要点
- **极简原则**：只开发MVP必需的基础组件
- **表格优先**：使用表格而非复杂卡片布局
- **无复杂动画**：专注功能验证而非视觉效果

#### MVP基础组件（2天）

**🔲 1. 基础UI组件（极简版）**
- [ ] **LanguageTable组件**
  - [ ] LanguageTable.test.tsx → 测试排序、筛选功能
  - [ ] LanguageTable.tsx → 实现简洁的表格展示
  - 功能：按难度/时长排序，按FSI等级筛选
  
- [ ] **LanguageRow组件**
  - [ ] LanguageRow.test.tsx → 测试行点击、数据展示
  - [ ] LanguageRow.tsx → 实现表格行组件
  - 功能：点击跳转详情页，显示核心信息

- [ ] **简单Filter组件**
  - [ ] Filter.test.tsx → 测试筛选逻辑
  - [ ] Filter.tsx → 实现FSI级别筛选
  - 功能：1-5级FSI分类筛选

**🔲 2. 数据处理函数（极简版）**
- [ ] **语言排序逻辑**
  - [ ] sort.test.ts → 测试按难度、时长排序
  - [ ] sort.ts → 实现排序函数
  
- [ ] **基础筛选逻辑**
  - [ ] filter.test.ts → 测试FSI级别筛选
  - [ ] filter.ts → 实现筛选函数

**砍掉的复杂组件**
- ❌ Card组件（改用表格）
- ❌ Modal组件（暂不需要弹窗）
- ❌ 搜索功能（MVP不包含）
- ❌ 复杂动画效果

---

### 第三阶段：MVP页面功能实现 🚧 **重新规划**

#### MVP 3页面结构（3天）

**🔲 1. 首页（极简版）**
- [ ] **Hero组件**
  - [ ] hero.test.tsx → 测试标题和CTA按钮
  - [ ] hero.tsx → 实现简洁的头部区域
  - 内容：价值主张 + FSI权威性说明 + 查看排行榜按钮

- [ ] **TopLanguages组件**  
  - [ ] top-languages.test.tsx → 测试Top 10语言展示
  - [ ] top-languages.tsx → 实现最容易语言快速预览
  - 功能：静态展示，点击跳转详情页

**🔲 2. 语言排行榜页面**
- [ ] **LanguageListPage**
  - [ ] language-list-page.test.tsx → 测试完整页面功能
  - [ ] page.tsx → 实现/languages页面
  - 功能：表格展示 + 排序 + 筛选 + 分页

- [ ] **集成测试**
  - [ ] language-list.integration.test.tsx → 测试页面组件协作
  - 验证：筛选-排序-分页的完整流程

**🔲 3. 语言详情页面**  
- [ ] **LanguageDetail组件**
  - [ ] language-detail.test.tsx → 测试详情展示和导航
  - [ ] [id]/page.tsx → 实现动态路由详情页
  - 功能：基础信息 + FSI数据 + 相似语言推荐

- [ ] **路由测试**
  - [ ] dynamic-routes.test.tsx → 测试动态路由参数解析
  - 验证：正确的语言ID解析和404处理

**砍掉的复杂页面功能**
- ❌ 交互式地图
- ❌ 个性化推荐工具  
- ❌ 学习时间计算器
- ❌ 复杂图表可视化
- ❌ 语言对比功能

#### 📋 第三阶段任务清单
- [ ] 实现3个核心页面的基础功能
- [ ] 编写页面集成测试  
- [ ] 确保移动端基础响应式
- [ ] 验证用户基础流程
- [ ] **预估时间**：3天

---

### 第四阶段：MVP测试与部署 🚧 **新增**

#### MVP验证测试（1天）

**🔲 1. 端到端流程测试**
- [ ] **MVP用户旅程测试**
  - [ ] mvp-user-journey.cy.ts → 测试完整MVP流程
  - 流程：首页 → 排行榜 → 语言详情 → 返回排行榜
  
- [ ] **核心假设验证测试**
  - [ ] core-assumptions.cy.ts → 测试关键用户行为
  - 验证：排序使用、筛选使用、详情页停留时间

**🔲 2. 性能与兼容性测试**
- [ ] **基础性能测试**
  - [ ] performance.test.ts → 测试页面加载速度
  - 目标：首屏 < 2秒，完整加载 < 3秒
  
- [ ] **移动端兼容测试**
  - [ ] mobile-compatibility.cy.ts → 测试基础移动端功能
  - 验证：表格在移动端可用，筛选功能正常

**🔲 3. 部署准备**
- [ ] **构建测试**
  - [ ] build.test.ts → 测试Next.js构建过程
  - 验证：静态生成、路由正确性
  
- [ ] **SEO基础测试**
  - [ ] seo-basics.test.ts → 测试meta标签、sitemap
  - 确保：标题、描述、Open Graph标签完整

---

## 📈 MVP-TDD最佳实践调整

### 简化的质量标准
- **单元测试**：核心函数和组件必测
- **集成测试**：页面级功能必测  
- **E2E测试**：MVP用户流程必测
- **性能基线**：页面加载 < 3秒
- **覆盖率目标**：80%（降低以提高速度）

### MVP验证指标
- **技术指标**：所有测试通过，构建成功
- **用户指标**：完整流程可走通
- **性能指标**：移动端和桌面端基础性能达标

---

## ⏰ MVP开发时间重新规划

### 总周期：7天（而非原计划12天）

- **✅ 第一阶段**：已完成 + 1天调整（数据结构MVP化）
- **🔲 第二阶段**：2天（极简组件开发）  
- **🔲 第三阶段**：3天（3页面功能实现）
- **🔲 第四阶段**：1天（测试与部署）

### 每日具体计划

**Day 1：数据层MVP调整**
- 重定义LanguageMVP接口
- 准备50种语言标准数据
- 更新数据验证测试

**Day 2-3：基础组件开发**
- LanguageTable + LanguageRow组件
- 排序和筛选功能实现
- 基础UI组件测试

**Day 4-6：页面功能实现**
- 首页Hero + TopLanguages
- 排行榜页面完整功能
- 语言详情页基础功能

**Day 7：集成测试与部署**
- E2E用户流程测试
- 性能测试和优化
- Vercel部署上线

---

## 🎯 MVP成功验证标准

### 技术验证
- [ ] 所有TDD测试用例通过（目标>100个测试用例）
- [ ] 代码覆盖率达到80%以上
- [ ] 构建和部署成功，无错误

### 功能验证  
- [ ] 用户可以浏览50种语言排行榜
- [ ] 排序和筛选功能正常工作
- [ ] 语言详情页提供有价值信息
- [ ] 移动端基础功能可用

### 性能验证
- [ ] 首屏加载时间 < 2秒
- [ ] 完整页面加载 < 3秒  
- [ ] Lighthouse性能分数 > 85
- [ ] 核心Web指标达标

---

## 🚀 MVP之后的TDD扩展路径

### Phase 2：功能增强（如果MVP验证成功）
- 语言对比功能的TDD开发
- 个性化推荐工具的TDD实现
- 高级筛选和搜索功能

### Phase 3：体验优化（如果用户反馈积极）
- 交互动画和视觉优化
- 图表数据可视化
- 社区功能开发

**关键原则：每个扩展功能都必须先通过TDD验证其价值**

---

## 📝 开发进度追踪

### 当前状态
- **✅ 测试环境**：完全就绪
- **✅ 基础数据**：28种语言已有，需扩展至50种
- **🔲 MVP组件**：等待开始开发
- **🔲 MVP页面**：等待开始开发  
- **🔲 E2E测试**：等待实现

### 即将开始：数据层MVP调整（预计1天）
1. 重新定义LanguageMVP接口
2. 收集和标准化50种语言数据
3. 更新数据验证测试用例
4. 确保数据质量和一致性

**下一步行动**：开始执行第一阶段的数据调整任务，为MVP核心功能奠定坚实基础。

---

*本TDD方案已根据MVP需求重新优化，专注于快速验证核心价值假设，同时保持代码质量和测试覆盖率。每个开发阶段都有明确的成功标准和时间限制。*